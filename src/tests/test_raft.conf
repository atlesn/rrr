[instance_test_module]
module=test_module
senders=instance_perl
topic_filter=raft-ok
test_method=test_anything

<ROUTE>
T #
D instance_raw APPLY
T raft-ok
D instance_test_module APPLY
T raft/1
T raft/3
OR
D instance_raft_1 APPLY
T raft/2
D instance_raft_2 APPLY
POP
POP
POP
POP

[instance_perl]
module=perl5
senders=instance_raft_1,instance_raft_2
duplicate=yes
route=<ROUTE>
perl5_file=test_raft.pl
perl5_source_sub=source
perl5_process_sub=process
perl5_do_include_build_directories=yes
perl5_source_interval_ms=500

[instance_raft_1]
module=raft
senders=instance_perl
duplicate=yes
raft_nodes=localhost:9001->1,localhost:9002->2
raft_directory=/tmp/rrr-test-raft
raft_status_messages=yes

[instance_raft_2]
module=raft
senders=instance_perl
duplicate=yes
raft_nodes=localhost:9002->2,localhost:9001->1
raft_directory=/tmp/rrr-test-raft
raft_preferred_leader=1
raft_status_messages=yes

[instance_raw]
module=raw
senders=instance_raft_1,instance_raft_2,instance_perl
raw_print_data=yes
